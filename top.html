<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MeMes’ World – Top Memes</title>

<style>
/* GLOBAL --------------------------------------- */
* {
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
  color: #111;
  background: linear-gradient(135deg, #f7eaff, #eafffd, #fff5e9);
  background-size: 300% 300%;
  animation: bgShift 12s ease infinite;
  overflow-x: hidden;
}
@keyframes bgShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes floatUp {
  from { transform: translateY(40vh) scale(1); opacity: 1; }
  to   { transform: translateY(-60vh) scale(0.6); opacity: 0; }
}

/* PARTICLES ----------------------------------- */
.particle {
  position: fixed;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255,255,255,0.7);
  filter: blur(3px);
  animation: floatUp 12s linear infinite;
  pointer-events: none;
}

/* CONTAINER ----------------------------------- */
.container {
  max-width: 1150px;
  margin: 40px auto 70px;
  padding: 32px 38px;
  background: rgba(255,255,255,0.9);
  border-radius: 26px;
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 60px rgba(15,23,42,0.18);
  opacity: 0;
  transform: translateY(10px);
  animation: fadeIn 0.6s ease forwards;
}
@keyframes fadeIn {
  to { opacity:1; transform:translateY(0); }
}

/* NAV ------------------------------------------ */
header { display:flex; justify-content:space-between; align-items:center; }
.tagline { margin-top: 3px; font-size:14px; color:#666; }
nav {
  display:flex;
  gap:2px;
  padding:4px;
  background:#f3f3f5;
  border-radius:999px;
}
nav a {
  font-size:14px;
  padding:6px 16px;
  border-radius:999px;
  text-decoration:none;
  color:#444;
}
nav a.current { background:#111; color:#fff; }
nav a:hover:not(.current) { background:#e5e5e8; }

/* GRID — LARGER TILES --------------------------- */
.grid {
  margin-top: 30px;
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
  gap:22px;
}
.tile {
  width:100%;
  padding-top:100%;
  position:relative;
  background:#ddd;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 10px 26px rgba(0,0,0,0.12);
  transition:0.3s;
}
.tile:hover {
  transform:translateY(-6px);
  box-shadow:0 18px 40px rgba(255,140,200,0.35);
}
.tile img {
  position:absolute;
  width:100%; height:100%;
  inset:0;
  object-fit:cover;
}

/* LABELS ---------------------------------------- */
.time-label {
  position:absolute;
  top:10px; left:10px;
  padding:3px 10px;
  background:rgba(0,0,0,0.65);
  color:#fff;
  font-size:12px;
  border-radius:999px;
}
.like-btn {
  position:absolute;
  right:10px; bottom:10px;
  padding:6px 12px;
  font-size:12px;
  border:none;
  border-radius:999px;
  cursor:pointer;
  background:white;
  box-shadow:0 3px 6px rgba(0,0,0,0.14);
}

/* BACK LINK -------------------------------------- */
.back-link {
  margin-top: 20px;
  font-size:14px;
  text-decoration:underline;
  cursor:pointer;
  color:#444;
  width:max-content;
}

/* FOOTER ----------------------------------------- */
footer {
  margin-top: 25px;
  font-size:12px;
  color:#777;
  text-align:right;
}

/* BACK TO TOP ----------------------------------- */
#backToTop {
  position:fixed;
  left:24px;
  bottom:24px;
  background:rgba(255,255,255,0.9);
  padding:8px 14px;
  border:1px solid #ddd;
  border-radius:999px;
  cursor:pointer;
  font-size:13px;
  opacity:0;
  transition:0.3s;
}
#backToTop.show { opacity:1; }

/* MOBILE ----------------------------------------- */
@media (max-width:650px){
  .container { padding:22px; }
  .grid { grid-template-columns: repeat(2, minmax(0, 1fr)); gap:14px; }
  .tile { border-radius:16px; }
}
</style>
</head>

<body>

<script>
// Floating particles
for (let i=0;i<18;i++){
  const p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"vw";
  p.style.animationDelay=Math.random()*-12+"s";
  document.body.appendChild(p);
}
</script>

<div class="container">
  <header>
    <div>
      <h1>Top Memes</h1>
      <div class="tagline">The 10 most loved memes in MeMes’ World.</div>
    </div>

    <nav>
      <a href="index.html">Newest</a>
      <a href="top.html" class="current">Top Memes</a>
      <a href="gallery.html">Gallery</a>
    </nav>
  </header>

  <div class="back-link" onclick="location.href='index.html'">← Back to Newest</div>

  <div id="grid" class="grid"></div>

  <footer>Once you drop a meme, you can’t delete it.</footer>
</div>

<button id="backToTop">↑ Back to Top</button>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyCX45PRa3xc9tDnPC5zVxaFHaaijB1g2Xk",
  authDomain: "memes--world-6276b.firebaseapp.com",
  projectId: "memes--world-6276b",
  storageBucket: "memes--world-6276b.appspot.com",
  messagingSenderId: "332915204004",
  appId: "1:332915204004:web:09074db940dfc1755ceb31",
  measurementId: "G-CWJX78W20M"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();

function timeAgo(ts){
  if(!ts) return "just now";
  const sec=(Date.now()-ts.toMillis())/1000;
  if(sec<60) return "just now";
  if(sec<3600) return Math.floor(sec/60)+"m ago";
  if(sec<86400) return Math.floor(sec/3600)+"h ago";
  return Math.floor(sec/86400)+"d ago";
}

// Render top 10
const grid=document.getElementById("grid");
function render(docs){
  grid.innerHTML="";
  docs.forEach(doc=>{
    const d=doc.data();
    const tile=document.createElement("div");
    tile.className="tile";
    tile.innerHTML=`
      <img src="${d.url}">
      <div class="time-label">${timeAgo(d.createdAt)}</div>
      <button class="like-btn">❤️ ${d.likes||0}</button>
    `;
    tile.querySelector(".like-btn").onclick=()=>{
      db.collection("memes").doc(doc.id).update({likes:(d.likes||0)+1});
    };
    grid.appendChild(tile);
  });
}

// Load top 10 by likes
db.collection("memes")
  .orderBy("likes","desc")
  .limit(10)
  .onSnapshot(s=>render(s.docs));

// Back to top
window.addEventListener("scroll",()=>{
  const b=document.getElementById("backToTop");
  if(window.scrollY>200) b.classList.add("show");
  else b.classList.remove("show");
});
document.getElementById("backToTop").onclick=()=>window.scrollTo({top:0,behavior:"smooth"});
</script>

</body>
</html>
